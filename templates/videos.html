{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2>ðŸŽ¥ Health & Wellness Videos</h2>
    <p>Watch these videos to learn more about health, fitness, and mental well-being.</p>
    <div class="videos-container" id="videos-container">
        </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Function to create and display a video card
        function createVideoCard(video) {
            const container = document.getElementById('videos-container');
            
            const videoDiv = document.createElement('div');
            videoDiv.classList.add('video-card');

            const title = document.createElement('h3');
            title.textContent = video.title;
            videoDiv.appendChild(title);

            const iframe = document.createElement('iframe');
            iframe.src = `https://www.youtube.com/embed/${video.youtube_id}`;
            iframe.frameBorder = "0";
            iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
            iframe.allowFullscreen = true;
            videoDiv.appendChild(iframe);

            const description = document.createElement('p');
            description.textContent = video.description;
            videoDiv.appendChild(description);

            container.appendChild(videoDiv);
        }

        // Fetch data from the API
        fetch('/api/videos')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                data.forEach(video => {
                    createVideoCard(video);
                });
            })
            .catch(error => {
                console.error('Error fetching videos:', error);
                const container = document.getElementById('videos-container');
                container.textContent = 'Failed to load videos. Please try again later.';
            });
    });
</script>
{% endblock %}